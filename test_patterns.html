<!DOCTYPE html>
<html>
<head>
    <title>Pattern Test</title>
</head>
<body>
    <h1>Pod Name Pattern Test</h1>
    <div id="results"></div>
    
    <script>
        // Test pod names that should be clickable
        const testPodNames = [
            'azure-ip-masq-agent-nbnf4',
            'cloud-node-manager-blkv2', 
            'microsoft-defender-collector-misc-6c7847c69-w6zgp',
            'azure-cns-mp2pg',
            'coredns-6f776c8fb5-dhf76'
        ];
        
        // Our patterns from formatting.js
        const resourcePatterns = [
            { 
                pattern: /^(\s*)(azure-[a-z0-9\-]+)(\s+.*)?$/gm, 
                category: 'azure-pods',
                name: 'azure-pods'
            },
            { 
                pattern: /^(\s*)(cloud-[a-z0-9\-]+)(\s+.*)?$/gm, 
                category: 'cloud-pods',
                name: 'cloud-pods'
            },
            { 
                pattern: /^(\s*)(microsoft-defender-[a-z0-9\-]+)(\s+.*)?$/gm, 
                category: 'defender-pods',
                name: 'defender-pods'
            },
            { 
                pattern: /^(\s*)(coredns-[a-z0-9\-]{5,})(\s+.*)?$/gm, 
                category: 'coredns-pods',
                name: 'coredns-pods'
            },
            { 
                pattern: /^(\s*)([a-z0-9]+-[a-z0-9]+-[a-z0-9]+-[a-z0-9]{3,})(\s+.*)?$/gm, 
                category: 'generic-4-part',
                name: 'generic-4-part'
            },
            { 
                pattern: /^(\s*)([a-z][a-z0-9\-]*-[a-z0-9]{4,})(\s+.*)?$/gm, 
                category: 'generic-suffix',
                name: 'generic-suffix'
            },
            { 
                pattern: /^(\s*)([a-z0-9\-]+-[a-z0-9]{3,}-[a-z0-9]{3,})(\s+.*)?$/gm, 
                category: 'generic-complex',
                name: 'generic-complex'
            }
        ];
        
        function testPattern(podName, pattern, patternName) {
            // Reset pattern lastIndex for global patterns
            pattern.pattern.lastIndex = 0;
            const match = pattern.pattern.test(podName);
            return { podName, patternName, match };
        }
        
        function runTests() {
            const results = [];
            
            testPodNames.forEach(podName => {
                console.log(`\nüß™ Testing: ${podName}`);
                const podResults = {
                    podName,
                    matches: []
                };
                
                resourcePatterns.forEach(pattern => {
                    const result = testPattern(podName, pattern, pattern.name);
                    podResults.matches.push(result);
                    if (result.match) {
                        console.log(`  ‚úÖ Matched: ${pattern.name}`);
                    }
                });
                
                const hasAnyMatch = podResults.matches.some(m => m.match);
                if (!hasAnyMatch) {
                    console.log(`  ‚ùå NO MATCHES for ${podName}`);
                }
                
                results.push(podResults);
            });
            
            return results;
        }
        
        const testResults = runTests();
        
        // Display results
        const resultsDiv = document.getElementById('results');
        testResults.forEach(result => {
            const div = document.createElement('div');
            div.style.marginBottom = '20px';
            div.style.padding = '10px';
            div.style.border = '1px solid #ccc';
            
            const hasMatch = result.matches.some(m => m.match);
            div.style.backgroundColor = hasMatch ? '#e8f5e8' : '#ffeaea';
            
            div.innerHTML = `
                <h3>${result.podName} ${hasMatch ? '‚úÖ' : '‚ùå'}</h3>
                <ul>
                    ${result.matches.map(m => 
                        `<li>${m.patternName}: ${m.match ? '‚úÖ' : '‚ùå'}</li>`
                    ).join('')}
                </ul>
            `;
            
            resultsDiv.appendChild(div);
        });
    </script>
</body>
</html>
